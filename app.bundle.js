(()=>{"use strict";var n={129:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(359),r=t.n(o),a=t(920),d=t.n(a)()(r());d.push([n.id,"* {\n  box-sizing: border-box;\n  list-style: none;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 0 20px;\n  background-color: #f5f5f5;\n  color: #333;\n}\n\nh1 {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.visually--hidden {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.app {\n  display: flex;\n  gap: 20px;\n}\n\n.sidebar {\n  min-width: min(300px, 28%);\n  background-color: white;\n  padding: 15px;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n}\n\n.tasks__container {\n  flex-grow: 1;\n  background-color: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n}\n\n.task {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.projects__form,\n.modal__form {\n  margin-bottom: 20px;\n  display: flex;\n  gap: 0.4rem;\n}\n\ninput,\nselect,\ntextarea {\n  padding: 8px 0.5rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n/* Buttons */\n\nbutton {\n  outline: none;\n  cursor: pointer;\n  font-weight: 500;\n  border-radius: 4px;\n  border: none;\n  padding: 4px 0.3rem;\n}\n\n.btn--primary {\n  border-radius: 4px;\n  padding: 8px 0.5rem;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  line-height: normal;\n  height: max-content;\n  transition: background-color 0.3s ease;\n}\n\n.btn--primary:hover {\n  background-color: #45a049;\n}\n\n.btn--secondary {\n  background-color: #3b82f6;\n  border: 1px solid #3b82f6;\n  color: #fff;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn--secondary:hover {\n  background-color: #2563eb;\n  border-color: #2563eb;\n}\n\n.projects__form input {\n  width: max(100px, 100%);\n}\n\n.projects__list {\n  max-height: 300px;\n}\n\n.project-item {\n  padding: 0 10px;\n  margin: 5px 0;\n  background-color: #f1f1f1;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  max-height: 2.5rem;\n  position: relative;\n}\n\n.project-item__menu {\n  position: absolute;\n  bottom: 80%;\n  right: -15%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  transition: all 0.3s ease-in-out;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n  box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n  padding: 0 5px;\n}\n\n.project-item.active {\n  background-color: #dcedc8;\n  font-weight: 600;\n}\n\n.todo__item {\n  padding: 15px;\n  margin-bottom: 10px;\n  background-color: #f9f9f9;\n  border-radius: 6px;\n  border-left: 4px solid #ccc;\n}\n\n.todo__item.low {\n  border-left-color: #8bc34a;\n}\n\n.todo__item.medium {\n  border-left-color: #ff9800;\n}\n\n.todo__item.high {\n  border-left-color: #f44336;\n}\n\n.todo__item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  height: 1.5rem;\n}\n\n.todo__title {\n  font-weight: bold;\n  font-size: 1.1em;\n}\n\n.todo__description {\n  margin-bottom: 10px;\n}\n\n.todo__notes {\n  font-style: italic;\n  background-color: #fff9c4;\n  padding: 8px;\n  border-radius: 4px;\n  margin-top: 10px;\n}\n\n.todo__actions {\n  display: flex;\n  gap: 8px;\n}\n\n.todo__meta {\n  color: #666;\n  font-size: 0.9em;\n  margin-bottom: 10px;\n}\n\n.todo__btn--delete {\n  background-color: #f44336;\n  color: #fafafa;\n\n  &:hover {\n    background-color: #d32f2f;\n  }\n}\n\n.todo__btn--edit {\n  background-color: #2196f3;\n  color: #f0f0f0;\n\n  &:hover {\n    background-color: #0b7dda;\n  }\n}\n\n.completed {\n  text-decoration: line-through;\n  opacity: 0.6;\n}\n\n@media (width <= 768px) {\n  .projects__form {\n    flex-direction: column;\n  }\n\n .app {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .sidebar {\n    min-width: 100%;\n  }\n  \n  .project-item__menu {\n    right: 0;\n    left: 0;\n  }\n}\n\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgb(0 0 0 / 50%);\n  z-index: 999;\n  display: none;\n}\n\n.overlay.show {\n  display: block;\n}\n\n.all-tasks {\n  cursor: pointer;\n  color: #3b82f6;\n  text-decoration: underline;\n  border: none;\n  background: none;\n  padding: 0;\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.all-tasks:hover {\n  color: #2563eb;\n}\n\n.all-tasks:focus {\n  outline: none;\n  color: #1d4ed8;\n}\n\n.all-tasks:active {\n  color: #1e40af;\n}\n",""]);const i=d},135:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},138:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(359),r=t.n(o),a=t(920),d=t.n(a)()(r());d.push([n.id,".menu {\n  position: relative;\n}\n\n.action-btn {\n  background-color: transparent;\n  cursor: pointer;\n  border: none;\n  transition: all 0.2s ease;\n}\n\n.action-btn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgb(0 0 0 / 10%);\n}\n\n.dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  box-shadow: 0 8px 32px rgb(0 0 0 / 15%);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: all 0.2s ease;\n  z-index: 1000;\n  margin-top: 8px;\n  min-width: 180px;\n}\n\n.dropdown--active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.menu-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  font-size: 14px;\n  border: none;\n  background: none;\n  color: #333;\n  width: 100%;\n  text-align: left;\n  font-weight: 400;\n}\n\n.menu-item:first-child {\n  border-radius: 8px 8px 0 0;\n}\n\n.menu-item:last-child {\n  border-radius: 0 0 8px 8px;\n}\n\n.menu-item:hover {\n  background: #f8f8f8;\n}\n\n.menu-item:active {\n  background: #f0f0f0;\n}\n\n.notification {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: #fff;\n  color: #333;\n  padding: 12px 20px;\n  border-radius: 8px;\n  border: 1px solid #e0e0e0;\n  box-shadow: 0 4px 16px rgb(0 0 0 / 15%);\n  transform: translateX(150%);\n  transition: transform 0.3s ease;\n  z-index: 1001;\n  font-size: 14px;\n}\n\n.notification--show {\n  transform: translateX(0);\n}\n",""]);const i=d},212:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},d=[],i=0;i<n.length;i++){var s=n[i],c=o.base?s[0]+o.base:s[0],l=a[c]||0,p="".concat(c," ").concat(l);a[c]=l+1;var m=t(p),u={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==m)e[m].references++,e[m].updater(u);else{var f=r(u,o);o.byIndex=i,e.splice(i,0,{identifier:p,updater:f,references:1})}d.push(p)}return d}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var d=0;d<a.length;d++){var i=t(a[d]);e[i].references--}for(var s=o(n,r),c=0;c<a.length;c++){var l=t(a[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}a=s}}},261:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},359:n=>{n.exports=function(n){return n[1]}},604:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},800:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(359),r=t.n(o),a=t(920),d=t.n(a)()(r());d.push([n.id,".modal__overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgb(0 0 0 / 50%);\n  z-index: 1000;\n  display: none;\n}\n\n.modal__overlay.show {\n  display: block;\n}\n\n.modal__content {\n  overflow-y: hidden;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) scale(0.9);\n  width: 90%;\n  max-width: 32rem;\n  background-color: white;\n  border-radius: 0.5em;\n  box-shadow: 0 10px 15px rgb(0 0 0 / 10%);\n  display: none;\n  z-index: 1001;\n  transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n}\n\n.modal__content.show {\n  display: block;\n}\n\n.modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal__title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.modal__close-btn {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 0.375rem;\n  color: #6b7280;\n  transition: background 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal__close-btn:hover {\n  background-color: #f3f4f6;\n}\n\n.modal__body {\n  padding: 1.5rem;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n.modal__form {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  align-items: start;\n}\n\n.modal__form .full--width {\n  grid-column: span 2;\n}\n\n.modal__form > div {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.modal__form label {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 0.25rem;\n}\n\n.modal__form input,\n.modal__form textarea,\n.modal__form select {\n  padding: 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  background-color: white;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.modal__form input:focus,\n.modal__form textarea:focus,\n.modal__form select:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgb(59 130 246 / 10%);\n}\n\n/* stylelint-disable-next-line no-descending-specificity */\n.modal__form textarea {\n  resize: vertical;\n  min-height: 80px;\n}\n\n.modal__form textarea.full--width {\n  min-height: 60px;\n}\n\n.modal__footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  background-color: #f9fafb;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.modal__footer .btn--primary,\n.modal__footer .btn--secondary {\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  border: none;\n  transition: all 0.2s;\n  min-width: 80px;\n}\n\n.modal__footer .btn--primary {\n  background-color: #3b82f6;\n  color: white;\n}\n\n.modal__footer .btn--primary:hover {\n  background-color: #2563eb;\n}\n\n.modal__footer .btn--secondary {\n  background-color: #6b7280;\n  color: white;\n}\n\n.modal__footer .btn--secondary:hover {\n  background-color: #4b5563;\n}\n",""]);const i=d},805:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},920:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var d={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(d[s]=!0)}for(var c=0;c<n.length;c++){var l=[].concat(n[c]);o&&d[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},984:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(212),r=t.n(o),a=t(261),d=t.n(a),i=t(135),s=t.n(i),c=t(604),l=t.n(c),p=t(984),m=t.n(p),u=t(805),f=t.n(u),g=t(129),b={};b.styleTagTransform=f(),b.setAttributes=l(),b.insert=s().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=m(),r()(g.A,b),g.A&&g.A.locals&&g.A.locals;var h=t(800),x={};x.styleTagTransform=f(),x.setAttributes=l(),x.insert=s().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=m(),r()(h.A,x),h.A&&h.A.locals&&h.A.locals;var y=t(138),v={};v.styleTagTransform=f(),v.setAttributes=l(),v.insert=s().bind(null,"head"),v.domAPI=d(),v.insertStyleElement=m(),r()(y.A,v),y.A&&y.A.locals&&y.A.locals;const _=()=>{localStorage.setItem("todoApp",JSON.stringify({projects:k.projects,currentProjectId:k.currentProjectId,standaloneTasks:k.standaloneTasks}))},k={currentProjectId:"",projects:[],standaloneTasks:[]},w=n=>{const e=k.standaloneTasks.findIndex((e=>e.id===n));if(-1!==e)return{type:"standalone",index:e};for(const e of k.projects){const t=e.todos.findIndex((e=>e.id===n));if(-1!==t)return{type:"project",projectId:e.id,index:t}}return null},j=n=>{const e=w(n);if("standalone"===e?.type)return k.standaloneTasks.find((e=>e.id===n));if("project"===e?.type){const t=k.projects.find((n=>n.id===e.projectId));return t?.todos.find((e=>e.id===n))}return null},I=()=>Date.now().toString(36)+Math.random().toString(36).substring(2,5),E=document.getElementById("modal"),A=document.getElementById("modalOverlay"),T=document.getElementById("close-modal"),C=document.getElementById("cancelBtn"),L=()=>{A.classList.add("show"),E.classList.add("show"),document.body.style.overflow="hidden"},S=()=>{A.classList.remove("show"),E.classList.remove("show"),document.body.style.overflow=""};function B(n,e){const t=document.createElement(n);return t.className=e,t}function P(n,e){for(const t in e)if("className"===t)n.className=e[t];else if(t.startsWith("data-")){const o=t.slice(5).replace(/-([a-z])/g,((n,e)=>e.toUpperCase()));n.dataset[o]=e[t]}else t.startsWith("aria-")?n.setAttribute(t,e[t]):void 0!==n[t]?n[t]=e[t]:n.setAttribute(t,e[t]);return n}const D=(n=null)=>{k.currentProjectId=n;const e=document.createElement("div"),t=P(document.createElement("button"),{type:"button",textContent:"all tasks",id:"allTasks"});t.className="all-tasks";const o=document.createElement("h2"),r=k.projects.find((e=>e.id===n));n&&e.appendChild(t),o.textContent=n?`${r.name}'s Tasks`:"All Tasks",e.appendChild(o);const a=B("div","todo-list");a.id="todo-list",z(n).sort(((n,e)=>new Date(e.createdAt)-new Date(n.createdAt))).forEach((n=>{const e=B("div",`todo__item ${n.priority.toLowerCase()}`),t=B("div","todo__item-header"),o=B("h3","todo__title");o.textContent=n.title;const r=B("div","todo__actions"),d=document.createElement("button"),i=P(document.createElement("img"),{src:"./edit-white.svg",alt:"edit icon",width:"18",height:"18"});P(d,{className:"todo__btn--edit","aria-label":"Edit todo","data-id":n.id,"data-action":"edit-task"}),d.appendChild(i);const s=document.createElement("button"),c=P(document.createElement("img"),{src:"./delete-white.svg",alt:"delete icon",width:"18",height:"18"});P(s,{className:"todo__btn--delete","aria-label":"Delete todo","data-id":n.id,"data-action":"delete-task"}),s.appendChild(c),r.appendChild(d),r.appendChild(s),t.appendChild(o),t.appendChild(r),e.appendChild(t);const l=B("div","todo__meta");l.textContent=`Priority: ${N(n.priority)} | Due Date: ${n.dueDate}`,e.appendChild(l);const p=B("p","todo__description");p.textContent=n.desc,e.appendChild(p);const m=B("div","todo__notes");m.textContent=n.note,e.appendChild(m),a.appendChild(e)})),e.appendChild(a);const d=document.querySelector(".tasks__container");d&&(d.innerHTML="",d.appendChild(e))},z=n=>{if(n){const e=k.projects.find((e=>e.id===n));return e?.todos||[]}return[...k.projects.flatMap((n=>n.todos.map((n=>({...n}))))),...k.standaloneTasks]},N=n=>n.charAt(0).toUpperCase()+n.slice(1);let M={mode:"create",target:"standalone",projectId:null,taskIndex:null,taskId:null};const O=(n="standalone",e=null)=>{M={mode:"create",target:n,projectId:e,taskIndex:null},U(),L()},$=(n,e,t="project",o=null)=>{M={mode:"edit",target:t,projectId:o,taskIndex:e,taskId:n.id},q(n),L()},q=n=>{document.getElementById("todo-title").value=n.title,document.getElementById("todo-description").value=n.desc,document.getElementById("todo-due-date").value=n.dueDate,document.getElementById("todo-priority").value=n.priority,document.getElementById("todo-notes").value=n.note},U=()=>{document.getElementById("todo-title").value="",document.getElementById("todo-description").value="",document.getElementById("todo-due-date").value="",document.getElementById("todo-priority").value="low",document.getElementById("todo-notes").value=""};document.getElementById("confirmBtn").addEventListener("click",(()=>{const n={title:document.getElementById("todo-title").value.trim(),desc:document.getElementById("todo-description").value.trim(),dueDate:document.getElementById("todo-due-date").value,priority:document.getElementById("todo-priority").value,note:document.getElementById("todo-notes").value.trim(),createdAt:(new Date).toISOString()};if("create"===M.mode)"project"===M.target?((n,e)=>{const t=k.projects.find((e=>e.id===n));t&&(e.id||(e.id=I()),t.todos.unshift(e),_())})(M.projectId,n):(n=>{n.id||(n.id=I()),k.standaloneTasks.unshift(n),_()})(n);else if("edit"===M.mode)if(n.id=M.taskId,"project"===M.target){const e=k.projects.find((n=>n.id===M.projectId)),t=e.todos[M.taskIndex];e.todos[M.taskIndex]={...n,createdAt:t.createdAt}}else{const e=k.standaloneTasks[M.taskIndex];k.standaloneTasks[M.taskIndex]={...n,createdAt:e.createdAt}}_(),S(),D(M.projectId)}));const R=document.getElementById("notification"),F=n=>{R.textContent=n,R.classList.add("notification--show"),setTimeout((()=>{R.classList.remove("notification--show")}),3e3)},H=document.getElementById("projects__list"),J=(n,e,t,o)=>{const r=P(document.createElement("button"),{className:"menu-item",role:"menuitem","data-action":n}),a=P(document.createElement("img"),{src:t,alt:o,width:"18",height:"18"});return r.appendChild(a),r.append(document.createTextNode(e)),r},Y=()=>{if(H){H.innerHTML="";for(const n of k.projects){const e=B("div","project-item");P(e,{"data-id":n.id});const t=document.createElement("p");t.textContent=n.name,e.appendChild(t);const o=B("div","menu"),r=P(document.createElement("button"),{className:"action-btn","data-action-btn":n.id,ariaLabel:"Menu"}),a=P(document.createElement("img"),{src:"./ellipses.svg",alt:"Vertical ellipsis icon with three evenly spaced dots, commonly used to indicate a menu with more options.",width:"18",height:"18"});r.appendChild(a);const d=B("div","dropdown");P(d,{"data-dropdown":n.id,role:"menu"});const i=B("div","");P(i,{role:"group","aria-label":"Project actions"});const s=J("add","Add New Task","./add.svg","Plus sign icon representing the action to add a new item."),c=J("delete","Delete","./delete.svg","Delete icon");i.append(s,c),d.appendChild(i),o.append(r,d),e.appendChild(o),H.appendChild(e)}}},W=document.getElementById("overlay");let X=!1;const Q=()=>{const n=document.querySelectorAll(".dropdown.dropdown--active"),e=document.querySelectorAll(".action-btn.action-btn--active");n.forEach((n=>n.classList.remove("dropdown--active"))),e.forEach((n=>n.classList.remove("action-btn--active"))),W&&W.classList.remove("show"),X=!1};W.addEventListener("click",(()=>{X&&Q()}));const V=document.getElementById("project-input"),G=document.getElementById("add-project-btn"),K=document.getElementById("projects__list"),Z=()=>{if(!K)return;let n;K.addEventListener("click",(e=>{const t=e.target.closest("[data-action-btn]"),o=e.target.closest(".menu-item"),r=e.target.closest(".project-item");if(r&&!t){K.querySelectorAll(".project-item").forEach((n=>n.classList.remove("active"))),r.classList.add("active");const n=r.dataset.id;k.currentProjectId=n,D(n)}if(t){const e=t.dataset.actionBtn;(n=>{const e=document.querySelector(`.dropdown[data-dropdown="${n}"]`),t=document.querySelector(`.action-btn[data-action-btn="${n}"]`);e&&t&&W&&(e.classList.add("dropdown--active"),t.classList.add("action-btn--active"),W.classList.add("show"),X=!0)})(e),n=k.projects.find((n=>n.id===e)).name}if(o){const t=o.dataset.action,a=e.target.closest(".menu"),d=a?.querySelector(".action-btn"),i=d?.dataset.actionBtn;"delete"===t&&i&&((n=>{const e=k.projects.findIndex((e=>e.id===n));return-1!==e&&(k.projects.splice(e,1),k.currentProjectId===n&&(k.currentProjectId=null),_(),!0)})(i)&&(null===k.currentProjectId&&D(),Y()),((n,e)=>{Q();let t="";switch(n){case"add":t=`Added ${e} task`;break;case"delete":t=`${e} deleted`}F(t)})(t,n)),"add"===t&&(Q(),O("project",r.dataset.id))}}))};document.addEventListener("keydown",(n=>{"Escape"===n.key&&Q()}));const nn=()=>{document.body.addEventListener("click",(n=>{const e=n.target.closest("[data-id]"),t=document.getElementById("allTasks");if(n.target===t&&(document.querySelectorAll(".project-item").forEach((n=>n.classList.remove("active"))),k.currentProjectId=null,D()),!e)return;const o=e.dataset.action,r=e.dataset.id;if("delete-task"===o){const n=(n=>{const e=j(n);return e?.title||"Unknown Task"})(r);F(`${n} task deleted`),(n=>{const e=j(n),t=e?.title||"Task",o=(n=>{const e=w(n);let t=!1;if("standalone"===e?.type)k.standaloneTasks.splice(e.index,1),t=!0;else if("project"===e?.type){const n=k.projects.find((n=>n.id===e.projectId));n&&(n.todos.splice(e.index,1),t=!0)}return t&&_(),t})(n);o&&(D(k.currentProjectId),F(`"${t}" deleted`))})(r)}else"edit-task"===o&&(n=>{const e=w(n),t=j(n);t&&e&&("standalone"===e.type?$(t,e.index,"standalone"):"project"===e.type&&$(t,e.index,"project",e.projectId))})(r)}))};(()=>{const n=(()=>{try{return JSON.parse(localStorage.getItem("todoApp")||'{"projects":[],"standaloneTasks":[]}')}catch(n){return console.error("Failed to parse localStorage data:",n),{projects:[],standaloneTasks:[]}}})();localStorage.getItem("todoApp")&&0!==n.projects.length||(()=>{if(k.projects.length>0)return;const n={id:I(),name:"Sample Project – Debugging Reality",todos:[{id:I(),title:"Refactor spaghetti code",desc:"Turn a pasta dish into a fine dining experience.",dueDate:"2025-06-12",priority:"high",note:"It's not a bug, it's an undocumented feature. Also, don't forget to sacrifice a rubber duck.",createdAt:(new Date).toISOString()}]};k.projects.push(n),k.currentProjectId=n.id,_()})(),0===n.standaloneTasks.length&&(()=>{if(k.projects.standaloneTasks>0)return;const n={id:I(),title:"Play chess with AI",desc:"Try not to lose to the bot… again.",dueDate:"2025-06-12",priority:"low",note:"Tried to castle, but life threw me a null pointer instead. Queen-side refactor coming soon.",createdAt:(new Date).toISOString()};k.standaloneTasks.push(n),_()})()})(),(()=>{const n=localStorage.getItem("todoApp");if(n){const e=JSON.parse(n);k.projects=e.projects||[],k.projects.currentProjectId=e.currentProjectId,k.standaloneTasks=e.standaloneTasks}})(),document.addEventListener("DOMContentLoaded",(()=>{G.addEventListener("click",(()=>{(n=>{const e=n.trim();if(e){const n={id:I(),name:e,todos:[]};k.projects.push(n),_()}})(V.value),Y(),F(`${V.value} added to projects`),V.value=""})),Z(),Y(),nn(),D(),A.addEventListener("click",(n=>{S()})),E.addEventListener("click",(n=>{n.stopPropagation()})),T.addEventListener("click",S),C.addEventListener("click",S),document.addEventListener("keydown",(n=>{"Escape"===n.key&&S()})),document.getElementById("create-task-btn").addEventListener("click",O)}))})();